{"openapi":"3.0.3","info":{"title":"PHP Gaming Website API","description":"A reactive, domain-driven gaming platform featuring Connect Four gameplay, \nreal-time chat, and user management. The platform is built using microservices \narchitecture with separate contexts for Web Interface, Connect Four, Chat, \nand Identity management.\n","version":"1.0.0","contact":{"name":"Gaming Platform","url":"https://github.com/gaming-platform"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"}},"servers":[{"url":"http://localhost","description":"Local development server"},{"url":"https://api.gaming-platform.com","description":"Production server"}],"tags":[{"name":"Web Interface","description":"Main application pages and interface endpoints"},{"name":"Identity","description":"User authentication, registration, and profile management"},{"name":"Connect Four","description":"Connect Four game management and gameplay endpoints"},{"name":"Chat","description":"Real-time chat messaging system"},{"name":"Fragments","description":"UI fragment components for server-side includes"},{"name":"System","description":"System utilities and health checks"}],"paths":{"/":{"get":{"tags":["Web Interface"],"summary":"Lobby page","description":"Main lobby page where users can see available games and start new ones","operationId":"getLobby","responses":{"200":{"description":"Lobby page rendered successfully","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/profile":{"get":{"tags":["Web Interface"],"summary":"User profile page","description":"Display user profile with game history and statistics","operationId":"getUserProfile","parameters":[{"name":"state","in":"query","description":"Filter games by state","schema":{"type":"string","enum":["all","finished","running","aborted"],"default":"all"}},{"name":"page","in":"query","description":"Page number for pagination","schema":{"type":"integer","minimum":"1","default":"1"}}],"responses":{"200":{"description":"Profile page rendered successfully","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/game/{id}":{"get":{"tags":["Web Interface"],"summary":"Game page","description":"Display a specific game board and interface","operationId":"getGame","parameters":[{"name":"id","in":"path","required":"true","description":"Game ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Game page rendered successfully","content":{"text/html":{"schema":{"type":"string"}}}},"404":{"description":"Game not found"}}}},"/signup":{"get":{"tags":["Identity"],"summary":"Signup form","description":"Display user registration form","operationId":"getSignupForm","responses":{"200":{"description":"Signup form displayed","content":{"text/html":{"schema":{"type":"string"}}}},"302":{"description":"Redirect if user already signed up"}}},"post":{"tags":["Identity"],"summary":"Process signup","description":"Process user registration","operationId":"processSignup","requestBody":{"required":"true","content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"email":{"type":"string","format":"email","example":"user@example.com"},"username":{"type":"string","minLength":"3","maxLength":"50","example":"player123"}},"required":["email","username"]}}}},"responses":{"302":{"description":"Redirect to email verification page"},"400":{"description":"Validation errors","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/signup/verify-email":{"get":{"tags":["Identity"],"summary":"Email verification page","description":"Display email verification instructions","operationId":"getEmailVerification","responses":{"200":{"description":"Email verification page displayed","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/signup/confirm":{"get":{"tags":["Identity"],"summary":"Email confirmation form","description":"Display email confirmation form","operationId":"getEmailConfirmationForm","responses":{"200":{"description":"Confirmation form displayed","content":{"text/html":{"schema":{"type":"string"}}}}}},"post":{"tags":["Identity"],"summary":"Confirm signup","description":"Complete user registration after email verification","operationId":"confirmSignup","requestBody":{"required":"true","content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"email":{"type":"string","format":"email"},"username":{"type":"string"}},"required":["email","username"]}}}},"responses":{"302":{"description":"Redirect to lobby after successful confirmation"},"400":{"description":"Validation errors"}}}},"/login":{"get":{"tags":["Identity"],"summary":"Login form","description":"Display user login form","operationId":"getLoginForm","responses":{"200":{"description":"Login form displayed","content":{"text/html":{"schema":{"type":"string"}}}},"302":{"description":"Redirect if user already logged in"}}},"post":{"tags":["Identity"],"summary":"Process login","description":"Process user login with magic link","operationId":"processLogin","requestBody":{"required":"true","content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"email":{"type":"string","format":"email","example":"user@example.com"}},"required":["email"]}}}},"responses":{"302":{"description":"Redirect to check inbox page"},"400":{"description":"Validation errors"}}}},"/login/check-inbox":{"get":{"tags":["Identity"],"summary":"Check inbox page","description":"Display instructions to check email for login link","operationId":"getCheckInbox","responses":{"200":{"description":"Check inbox page displayed","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/login/check":{"get":{"tags":["Identity"],"summary":"Login verification","description":"Verify login link and authenticate user","operationId":"verifyLogin","responses":{"302":{"description":"Redirect after successful authentication"}}}},"/api/server-time":{"get":{"tags":["System"],"summary":"Get server time","description":"Returns current server timestamp in milliseconds","operationId":"getServerTime","responses":{"200":{"description":"Server time retrieved successfully","content":{"application/json":{"schema":{"type":"integer","format":"int64","description":"Server timestamp in milliseconds","example":"1640995200000"}}}}}}},"/api/chat/chats/{chatId}/write-message":{"post":{"tags":["Chat"],"summary":"Write message to chat","description":"Send a message to a specific chat","operationId":"writeMessage","parameters":[{"name":"chatId","in":"path","required":"true","description":"Chat ID","schema":{"type":"string"}}],"security":[{"cookieAuth":[]}],"requestBody":{"required":"true","content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"message":{"type":"string","maxLength":"1000","example":"Hello everyone!"}},"required":["message"]}}}},"responses":{"200":{"description":"Message sent successfully","content":{"application/json":{"schema":{"type":"object"}}}},"400":{"description":"Invalid message content"},"401":{"description":"Authentication required"},"403":{"description":"Access denied to chat"}}}},"/api/chat/chats/{chatId}/messages":{"get":{"tags":["Chat"],"summary":"Get chat messages","description":"Retrieve messages from a specific chat","operationId":"getChatMessages","parameters":[{"name":"chatId","in":"path","required":"true","description":"Chat ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Messages retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChatMessage"}}}}},"403":{"description":"Access denied to chat"},"404":{"description":"Chat not found"}}}},"/api/connect-four/games/open":{"post":{"tags":["Connect Four"],"summary":"Open a new game","description":"Create a new Connect Four game challenge","operationId":"openGame","security":[{"cookieAuth":[]}],"requestBody":{"required":"true","content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"size":{"type":"string","enum":["7x6","8x7","9x8","10x9"],"default":"7x6","example":"7x6"},"color":{"type":"integer","enum":["1","2"],"description":"1 for red, 2 for yellow","example":"1"},"timer":{"type":"string","enum":["none","move:15000","move:30000","move:60000","game:300000","game:600000"],"default":"move:15000","example":"move:15000"}},"required":["size","color","timer"]}}}},"responses":{"302":{"description":"Redirect to game challenge page"},"400":{"description":"Invalid game parameters"},"401":{"description":"Authentication required"}}}},"/api/connect-four/games/{gameId}/join":{"post":{"tags":["Connect Four"],"summary":"Join a game","description":"Join an open Connect Four game","operationId":"joinGame","parameters":[{"name":"gameId","in":"path","required":"true","description":"Game ID","schema":{"type":"string"}}],"security":[{"cookieAuth":[]}],"responses":{"200":{"description":"Successfully joined game","content":{"application/json":{"schema":{"type":"object"}}}},"400":{"description":"Cannot join game (already full, finished, etc.)"},"401":{"description":"Authentication required"},"404":{"description":"Game not found"}}}},"/api/connect-four/games/{gameId}/abort":{"post":{"tags":["Connect Four"],"summary":"Abort a game","description":"Abort a Connect Four game (only available to game creator)","operationId":"abortGame","parameters":[{"name":"gameId","in":"path","required":"true","description":"Game ID","schema":{"type":"string"}}],"security":[{"cookieAuth":[]}],"responses":{"200":{"description":"Game aborted successfully","content":{"application/json":{"schema":{"type":"object"}}}},"400":{"description":"Cannot abort game"},"401":{"description":"Authentication required"},"403":{"description":"Not authorized to abort this game"},"404":{"description":"Game not found"}}}},"/api/connect-four/games/{gameId}/resign":{"post":{"tags":["Connect Four"],"summary":"Resign from game","description":"Resign from an active Connect Four game","operationId":"resignFromGame","parameters":[{"name":"gameId","in":"path","required":"true","description":"Game ID","schema":{"type":"string"}}],"security":[{"cookieAuth":[]}],"responses":{"200":{"description":"Resigned from game successfully","content":{"application/json":{"schema":{"type":"object"}}}},"400":{"description":"Cannot resign from game"},"401":{"description":"Authentication required"},"403":{"description":"Not a player in this game"},"404":{"description":"Game not found"}}}},"/api/connect-four/games/{gameId}/move":{"post":{"tags":["Connect Four"],"summary":"Make a move","description":"Make a move in an active Connect Four game","operationId":"makeMove","parameters":[{"name":"gameId","in":"path","required":"true","description":"Game ID","schema":{"type":"string"}}],"security":[{"cookieAuth":[]}],"requestBody":{"required":"true","content":{"application/x-www-form-urlencoded":{"schema":{"type":"object","properties":{"column":{"type":"integer","minimum":"0","maximum":"9","description":"Column number (0-based)","example":"3"}},"required":["column"]}}}},"responses":{"200":{"description":"Move made successfully","content":{"application/json":{"schema":{"type":"object"}}}},"400":{"description":"Invalid move"},"401":{"description":"Authentication required"},"403":{"description":"Not your turn or not a player in this game"},"404":{"description":"Game not found"}}}},"/challenge/{id}":{"get":{"tags":["Connect Four"],"summary":"View game challenge","description":"Display a game challenge page","operationId":"viewChallenge","parameters":[{"name":"id","in":"path","required":"true","description":"Game ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Challenge page displayed","content":{"text/html":{"schema":{"type":"string"}}}},"301":{"description":"Redirect if game is no longer open"},"404":{"description":"Game not found"}}}},"/challenge/{id}/accept":{"post":{"tags":["Connect Four"],"summary":"Accept game challenge","description":"Accept an open game challenge","operationId":"acceptChallenge","parameters":[{"name":"id","in":"path","required":"true","description":"Game ID","schema":{"type":"string"}}],"security":[{"cookieAuth":[]}],"responses":{"302":{"description":"Redirect to game page"},"400":{"description":"Cannot accept challenge"},"401":{"description":"Authentication required"},"404":{"description":"Game not found"}}}},"/challenge/{id}/abort":{"post":{"tags":["Connect Four"],"summary":"Abort game challenge","description":"Abort own game challenge","operationId":"abortChallenge","parameters":[{"name":"id","in":"path","required":"true","description":"Game ID","schema":{"type":"string"}}],"security":[{"cookieAuth":[]}],"responses":{"302":{"description":"Redirect to lobby"},"401":{"description":"Authentication required"},"403":{"description":"Not authorized to abort this challenge"},"404":{"description":"Game not found"}}}},"/_fragment/connect-four/statistics":{"get":{"tags":["Fragments"],"summary":"Game statistics fragment","description":"Returns running games statistics for UI composition","operationId":"getStatisticsFragment","responses":{"200":{"description":"Statistics fragment rendered","content":{"text/html":{"schema":{"type":"string"}}},"headers":{"Cache-Control":{"description":"Fragment is cached for 10 seconds","schema":{"type":"string","example":"public, max-age=10"}}}}}}},"/_fragment/connect-four/open-games":{"get":{"tags":["Fragments"],"summary":"Open games fragment","description":"Returns list of open games for UI composition","operationId":"getOpenGamesFragment","responses":{"200":{"description":"Open games fragment rendered","content":{"text/html":{"schema":{"type":"string"}}}}}}},"/_fragment/connect-four/open":{"get":{"tags":["Fragments"],"summary":"Open game form fragment","description":"Returns form to create new game for UI composition","operationId":"getOpenGameFragment","responses":{"200":{"description":"Open game form fragment rendered","content":{"text/html":{"schema":{"type":"string"}}},"headers":{"Cache-Control":{"description":"Fragment is cached for 10 seconds","schema":{"type":"string","example":"public, max-age=10"}}}}}}},"/_fragment/connect-four/player-search-filter":{"get":{"tags":["Fragments"],"summary":"Player search filter fragment","description":"Returns player search statistics for UI composition","operationId":"getPlayerSearchFilterFragment","security":[{"cookieAuth":[]}],"responses":{"200":{"description":"Player search filter fragment rendered","content":{"text/html":{"schema":{"type":"string"}}}}}}}},"components":{"securitySchemes":{"cookieAuth":{"type":"apiKey","in":"cookie","name":"PHPSESSID","description":"Session-based authentication using PHP sessions"}},"schemas":{"ChatMessage":{"type":"object","properties":{"id":{"type":"string","description":"Message ID"},"authorId":{"type":"string","description":"Author user ID"},"authorName":{"type":"string","description":"Author username"},"message":{"type":"string","description":"Message content"},"timestamp":{"type":"integer","format":"int64","description":"Message timestamp in milliseconds"}},"required":["id","authorId","authorName","message","timestamp"],"example":{"id":"msg_123","authorId":"user_456","authorName":"PlayerOne","message":"Good game!","timestamp":"1640995200000"}},"Game":{"type":"object","properties":{"id":{"type":"string","description":"Game ID"},"state":{"type":"string","enum":["open","running","finished","aborted"],"description":"Current game state"},"width":{"type":"integer","minimum":"7","maximum":"10","description":"Board width"},"height":{"type":"integer","minimum":"6","maximum":"9","description":"Board height"},"player1":{"$ref":"#/components/schemas/Player"},"player2":{"$ref":"#/components/schemas/Player"},"board":{"type":"array","items":{"type":"array","items":{"type":"integer","enum":["0","1","2"]}},"description":"Game board state (0=empty, 1=player1, 2=player2)"},"currentPlayer":{"type":"integer","enum":["1","2"],"description":"Current player's turn"},"winner":{"type":"integer","enum":["1","2"],"nullable":"true","description":"Winner of the game (null if ongoing or draw)"},"timer":{"type":"string","description":"Timer configuration"},"createdAt":{"type":"integer","format":"int64","description":"Game creation timestamp"}},"required":["id","state","width","height","board","timer","createdAt"],"example":{"id":"game_123","state":"running","width":"7","height":"6","player1":{"id":"user_456","name":"PlayerOne","color":"1"},"player2":{"id":"user_789","name":"PlayerTwo","color":"2"},"board":[["0","0","0","0","0","0","0"],["0","0","0","0","0","0","0"],["0","0","0","0","0","0","0"],["0","0","0","0","0","0","0"],["0","0","0","0","0","0","0"],["0","0","0","0","0","0","0"]],"currentPlayer":"1","winner":null,"timer":"move:15000","createdAt":"1640995200000"}},"Player":{"type":"object","properties":{"id":{"type":"string","description":"Player user ID"},"name":{"type":"string","description":"Player username"},"color":{"type":"integer","enum":["1","2"],"description":"Player color (1=red, 2=yellow)"}},"required":["id","name","color"],"example":{"id":"user_456","name":"PlayerOne","color":"1"}},"User":{"type":"object","properties":{"userId":{"type":"string","description":"User ID"},"email":{"type":"string","format":"email","description":"User email"},"username":{"type":"string","description":"Username"},"isSignedUp":{"type":"boolean","description":"Whether user has completed signup"}},"required":["userId","email","username","isSignedUp"],"example":{"userId":"user_456","email":"player@example.com","username":"PlayerOne","isSignedUp":"true"}},"Error":{"type":"object","properties":{"error":{"type":"string","description":"Error message"},"code":{"type":"string","description":"Error code"},"violations":{"type":"array","items":{"type":"object","properties":{"property":{"type":"string"},"message":{"type":"string"}}},"description":"Validation violations"}},"required":["error"],"example":{"error":"Validation failed","code":"VALIDATION_ERROR","violations":[{"property":"email","message":"This field is required"}]}}}}}